ОТЛАДКА ТЕРМИНАЛА - ИНСТРУКЦИИ
================================

ПРОБЛЕМА: UI терминала не открывается в мире

ИСПРАВЛЕНИЯ:

1. **Отладочные сообщения** добавлены в:
   - TSE_OpenTerminalAction.c
   - TSE_TerminalContext.c
   - TSE_TerminalMenuWidgets.c

2. **Исправления в конфигурации**:
   - Добавлен m_sOpenAction "TSE_OpenTerminal" в TSE_TerminalContext
   - Добавлен ActionName "TSE_OpenTerminal" в Laptop.et
   - Убрана проверка IsOwner - любой игрок может открыть терминал
   - Исправлен формат layout файла (UUID + полный путь)

3. **Создан новый контекст** с другим именем для избежания кэширования

================================

ВАЖНОЕ ОТКРЫТИЕ:

✅ **Правильный формат layout файла**: `{UUID}UI/Layouts/Menu/Path.layout`
✅ **Пример из OVT_ShopContext**: `{846B87563CCE7DA1}UI/Layouts/Menu/ShopMenu.layout`

================================

ТЕКУЩИЙ СТАТУС:

✅ Действие работает и вызывается
✅ UI менеджер найден
✅ Контекст терминала найден
✅ Layout файл исправлен (правильный формат)
✅ **НОВЫЙ LAYOUT ПОДКЛЮЧЕН**: `{2563056570B97039}UI/Layouts/Menu/TerminalMenu/TerminalMenu_new.layout`
✅ **ВИДЖЕТЫ ОБНОВЛЕНЫ** для работы с новым layout
✅ **СИСТЕМА ПЕРЕКЛЮЧЕНИЯ ВКЛАДОК** реализована
✅ **КНОПКА ЗАКРЫТИЯ** работает
✅ **ОШИБКИ КОМПИЛЯЦИИ ИСПРАВЛЕНЫ** - убраны несуществующие методы
✅ **КУРСОР ОТЛАДКА** - добавлена принудительная активация и отладка контекста

================================

НОВЫЙ LAYOUT СТРУКТУРА:

1. **MainWindow** - главное окно терминала (964x600 пикселей)
2. **Верхняя панель** - кнопка закрытия, статус подключения, индикатор вкладки
3. **Три кнопки вкладок** - Tab_Intel, Tab_Factions, Tab_Smuglers
4. **Контент вкладок**:
   - **Intel**: Intel_Layout_Up + Intel_Layout_Down
   - **Factions**: Faction_Layout_Up
   - **Smuglers**: Smugglers_Layout_Up + Smugglers_Layout_Down

================================

РЕАЛИЗОВАННАЯ ФУНКЦИОНАЛЬНОСТЬ:

1. **Переключение вкладок** - работает через SetVisible(true/false)
2. **Кнопка закрытия** - закрывает контекст через context.OnClose()
3. **Индикатор вкладки** - обновляет Text0 в InfoLayout
4. **Отладочные сообщения** - подробное логирование всех действий
5. **Курсор отладка** - принудительная активация контекста в OnShow

================================

ИСПРАВЛЕННЫЕ ОШИБКИ КОМПИЛЯЦИИ:

1. **Убраны несуществующие методы** из TSE_TerminalContext.c:
   - UpdateRegionStability, UpdateAffectedLocations, UpdateOccupyingResources
   - UpdateResistanceThreat, UpdateFuturePlans, UpdateLastUpdated
   - UpdateNextDelivery, UpdateFactionProgress, UpdateAvailableWeapons, UpdateAvailableVehicles

2. **Исправлен вызов закрытия контекста** в TSE_TerminalMenuWidgets.c:
   - Используется правильный способ получения UI менеджера через OVT_UIManagerComponent
   - Используется context.OnClose() вместо context.Close()

3. **Добавлена отладка курсора** в TSE_TerminalContext.c:
   - Переопределен метод ShowLayout для отладки создания UI
   - Добавлена принудительная активация контекста в OnShow
   - Добавлена отладка в OnActiveFrame (каждую секунду)
   - Убраны спам логи для производительности

================================

ТЕСТИРОВАНИЕ:

1. **Скомпилировать мод** и запустить игру

2. **Найти ноутбук** в мире

3. **Использовать действие "Open Terminal"**

4. **Проверить консоль** - должны появиться сообщения:
   - [TSE_OpenTerminalAction] PerformAction called
   - [TSE_OpenTerminalAction] UI manager found
   - [TSE_OpenTerminalAction] Terminal context found
   - [TSE_TerminalContext] ShowLayout called
   - [TSE_TerminalContext] Creating widgets from layout
   - [TSE_TerminalContext] Enabling context
   - [TSE_TerminalContext] Calling OnShow
   - [TSE_TerminalContext] ShowLayout completed
   - [TSE_TerminalContext] OnShow called
   - [TSE_TerminalContext] Forced cursor activation for context: OverthrowTerminalContext
   - [TSE_TerminalMenuWidgets] InitializeWidgets called
   - [TSE_TerminalMenuWidgets] Widgets found - IntelTab: true, FactionsTab: true, SmuglersTab: true
   - [TSE_TerminalMenuWidgets] Close button found: true
   - [TSE_TerminalMenuWidgets] Tab indicator found: true
   - [TSE_TerminalMenuWidgets] Setting up event handlers
   - [TSE_TerminalMenuWidgets] Intel tab handler set
   - [TSE_TerminalMenuWidgets] Factions tab handler set
   - [TSE_TerminalMenuWidgets] Smuglers tab handler set
   - [TSE_TerminalMenuWidgets] Close button handler set
   - [TSE_TerminalMenuWidgets] Switching to tab: 0
   - [TSE_TerminalMenuWidgets] Tab switched successfully
   - [TSE_TerminalContext] OnActiveFrame - Context active: true, Context name: OverthrowTerminalContext (каждую секунду)

5. **Проверить UI** - должна появиться панель с:
   - Левая панель навигации с тремя кнопками вкладок
   - Правая панель контента с информацией Intel
   - Красной кнопкой закрытия в правом верхнем углу
   - Индикатором "Intel tab" в верхней панели
   - **КУРСОРОМ** - должен появиться курсор мыши

6. **Тестирование переключения**:
   - Нажать на "Factions tab" - должен показаться контент фракций
   - Нажать на "Smuglers tab" - должен показаться контент контрабандистов
   - Нажать на "Intel tab" - должен вернуться к Intel контенту
   - Индикатор в верхней панели должен обновляться

7. **Тестирование закрытия**:
   - Нажать на красную кнопку закрытия - терминал должен закрыться

================================

ВОЗМОЖНЫЕ ПРОБЛЕМЫ И РЕШЕНИЯ:

1. **Контейнеры сплющены** - исправлено позиционирование в layout
2. **Тексты не отображаются** - добавлены TextWidgetClass в кнопки
3. **Кнопка закрытия не видна** - исправлено позиционирование и добавлен текст
4. **Пустые столбики** - исправлены размеры панелей и контейнеров
5. **Контент не отображается** - исправлены размеры контейнеров контента
6. **Вкладки не переключаются** - проверьте отладочные сообщения в консоли
7. **Кнопка закрытия не работает** - проверьте имя контекста "OverthrowTerminalContext"
8. **Ошибки компиляции** - исправлены, убраны несуществующие методы
9. **Курсор не появляется** - проверьте отладочные сообщения о контексте и активации

================================

СЛЕДУЮЩИЕ ШАГИ:

1. Запустить игру и протестировать с новым layout
2. Если UI выглядит правильно и переключение работает - отлично!
3. Если есть проблемы - проверить отладочные сообщения в консоли
4. В будущем - добавить заполнение данных в виджеты 